<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PomoReward - å¾…åŠä¸ç•ªèŒ„é’Ÿ</title>
  <!-- Tailwind CSS ä¿ç•™åŸCDNï¼‰ -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- æ›¿æ¢Font Awesomeä¸ºå›½å†…CDNï¼‰ -->
  <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- æ€æºå®‹ä½“ï¼šæ–°å¢æœ¬åœ°å­—ä½“å…œåº•ï¼ˆé˜²æ­¢è°·æ­Œå­—ä½“åŠ è½½å¤±è´¥å½±å“æ–‡å­—æ ·å¼ï¼Œä¸æ”¹åŠ¨åŸæœ‰å¼•ç”¨ï¼‰ -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#2C5F2D',
            secondary: '#97A97C',
            accent: '#FF9F1C',
            neutral: '#F5F2EA',
            'neutral-dark': '#E5E1D8',
            text: '#3D2B1F',
            'text-light': '#6B5B47',
            'reset-red': '#8B0000' 
          },
          fontFamily: {
            sans: ['Noto Serif SC', 'serif'],
          }
        }
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
      }
      .transition-all-300 {
        transition: all 0.3s ease;
      }
      .glass-effect {
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
      }
      .paper-texture {
        background-color: #F5F2EA;
        background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23d9c9b0' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E");
      }
    }
    /* è°·æ­Œå­—ä½“åŠ è½½å¤±è´¥æ—¶ï¼Œå¯ç”¨ç³»ç»Ÿå®‹ä½“
    @font-face {
      font-family: 'Noto Serif SC';
      src: local('SimSun'), local('å®‹ä½“'), local('STSong');
      font-weight: 400 700;
      font-display: swap;
    }*/
  </style>
</head>
<body class="font-sans bg-neutral text-text min-h-screen">
  <div class="container mx-auto px-4 py-8 relative">
    <!-- å·¦ä¸Šè§’è¯´æ˜æŒ‰é’® -->
    <button id="info-btn" class="absolute top-4 left-4 bg-primary text-white px-4 py-2 rounded-lg shadow hover:bg-opacity-90 transition-all-300 text-sm flex items-center">
      <i class="fa fa-info-circle mr-2"></i>è¯´æ˜
    </button>
    
    <!-- å…¨å±€é‡ç½®æŒ‰é’® -->
    <button id="global-reset-btn" class="absolute top-4 right-4 text-reset-red hover:text-red-700 transition-all-300 text-sm">
      é‡ç½®
    </button>

    <!-- æ ‡é¢˜åŒºåŸŸ -->
    <header class="mb-8 text-center">
      <h1 class="text-4xl font-bold text-primary mb-2 text-shadow">ä¸“æ³¨å°</h1>
      <!-- æ—¥æœŸæ˜¾ç¤º -->
      <p id="current-date" class="text-text-light italic"></p>
    </header>

    <!-- ä¸»å†…å®¹åŒºåŸŸ - å›ºå®šå·¦å³æ’å¸ƒï¼ˆPCï¼‰/ä¸Šä¸‹ï¼ˆç§»åŠ¨ç«¯ï¼‰ -->
    <div class="flex flex-col lg:flex-row gap-8">
      <!-- å·¦ä¾§ï¼šç•ªèŒ„é’Ÿï¼ˆå›ºå®šï¼‰ -->
      <div class="lg:w-1/2 bg-paper-texture rounded-xl shadow-lg p-6 relative overflow-hidden">
        <div class="glass-effect rounded-xl p-8 relative z-10 h-full flex flex-col">
          <h2 class="text-2xl font-semibold mb-6 text-center">ç•ªèŒ„é’Ÿ</h2>
          
          <!-- ç•ªèŒ„é’Ÿæ˜¾ç¤º -->
          <div class="flex flex-col items-center mb-8 flex-grow">
            <div class="w-64 h-64 rounded-full bg-white shadow-md flex items-center justify-center mb-4 relative">
              <svg class="w-full h-full" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="45" fill="none" stroke="#E5E1D8" stroke-width="8" />
                <circle id="progress-circle" cx="50" cy="50" r="45" fill="none" stroke="#2C5F2D" stroke-width="8" stroke-dasharray="283" stroke-dashoffset="0" transform="rotate(-90 50 50)" />
              </svg>
              <div class="absolute inset-0 flex flex-col items-center justify-center">
                <span id="timer-display" class="text-5xl font-bold text-text">25:00</span>
                <span id="timer-label" class="text-lg text-text-light mt-2">ä¸“æ³¨ä¸­</span>
              </div>
            </div>
            
            <!-- ä¸“æ³¨æ¨¡å—é€‰æ‹© + ç®¡ç† -->
            <div class="mb-6 w-full max-w-md">
              <div class="flex justify-between items-center mb-2">
                <label class="block text-text-light">ä¸“æ³¨æ¨¡å—</label>
                <button id="manage-modules-btn" class="text-sm text-primary hover:underline">
                  <i class="fa fa-cog mr-1"></i>ç®¡ç†æ¨¡å—
                </button>
              </div>
              <div class="flex flex-wrap gap-2" id="focus-modules">
                <!-- æ¨¡å—æŒ‰é’®åŠ¨æ€ç”Ÿæˆ -->
              </div>
            </div>
            
            <!-- ç•ªèŒ„é’Ÿæ§åˆ¶æŒ‰é’® -->
            <div class="flex gap-4">
              <button id="toggle-state-btn" class="bg-primary text-white px-6 py-3 rounded-lg shadow hover:bg-opacity-90 transition-all-300">
                <i class="fa fa-play mr-2"></i><span id="toggle-state-text">å¼€å§‹ä¸“æ³¨</span>
              </button>
            </div>
          </div>
          
          <!-- ç•ªèŒ„é’Ÿè®¾ç½® -->
          <div class="border-t border-neutral-dark pt-6 mt-auto">
            <h3 class="text-xl font-semibold mb-4">è®¾ç½®</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label class="block text-text-light mb-2">ä¸“æ³¨æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰</label>
                <input type="number" id="focus-time" class="w-full px-4 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary" value="25" min="1" max="120">
                <div class="mt-2">
                  <label class="flex items-center text-sm text-text-light">
                    <input type="checkbox" id="focus-free-mode" class="mr-2 rounded border-neutral-dark text-primary focus:ring-secondary">
                    è‡ªç”±æ¨¡å¼
                  </label>
                </div>
              </div>
              <div>
                <label class="block text-text-light mb-2">ä¼‘æ¯æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰</label>
                <input type="number" id="break-time" class="w-full px-4 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary" value="5" min="1" max="30">
                <div class="mt-2">
                  <label class="flex items-center text-sm text-text-light">
                    <input type="checkbox" id="break-free-mode" class="mr-2 rounded border-neutral-dark text-primary focus:ring-secondary">
                    è‡ªç”±æ¨¡å¼
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- å³ä¾§ï¼šä»»åŠ¡å’Œå¿ƒæ„¿ï¼ˆå›ºå®šï¼‰ -->
      <div class="lg:w-1/2">
        <!-- ç§¯åˆ†æ˜¾ç¤º -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
          <div class="flex justify-between items-center">
            <h2 class="text-2xl font-semibold">æˆ‘çš„ç§¯åˆ†</h2>
            <div class="flex items-center">
              <i class="fa fa-star text-accent text-2xl mr-2"></i>
              <span id="points-display" class="text-3xl font-bold text-primary">0</span>
            </div>
          </div>
        </div>
        
        <!-- é€‰é¡¹å¡åˆ‡æ¢ -->
        <div class="bg-white rounded-xl shadow-lg overflow-hidden">
          <div class="flex border-b border-neutral-dark">
            <button id="tasks-tab" class="flex-1 py-4 text-center font-medium text-primary border-b-2 border-primary">ä»»åŠ¡æ¸…å•</button>
            <button id="wishes-tab" class="flex-1 py-4 text-center font-medium text-text-light">å¿ƒæ„¿å•</button>
          </div>
          
          <!-- ä»»åŠ¡æ¸…å•å†…å®¹ -->
          <div id="tasks-content" class="p-6">
            <!-- ä»»åŠ¡åˆ—è¡¨ -->
            <h3 class="text-xl font-semibold mb-4">ä»»åŠ¡åˆ—è¡¨</h3>
            <div id="tasks-list" class="space-y-3 mb-6">
              <!-- ä»»åŠ¡é¡¹åŠ¨æ€æ·»åŠ  -->
              <div class="task-item bg-neutral rounded-lg p-4 flex items-center justify-between">
                <div class="flex items-center">
                  <input type="checkbox" class="task-checkbox w-5 h-5 mr-3 rounded border-neutral-dark text-primary focus:ring-secondary">
                  <div>
                    <h4 class="font-medium">å®Œæˆç¤ºä¾‹ä»»åŠ¡</h4>
                    <p class="text-sm text-text-light">å¥–åŠ±: 10ç§¯åˆ†</p>
                  </div>
                </div>
                <div class="flex items-center">
                  <span class="text-xs bg-secondary text-white px-2 py-1 rounded-full mr-2">æ™®é€šä»»åŠ¡</span>
                  <button class="delete-task-btn text-text-light hover:text-red-500">
                    <i class="fa fa-trash"></i>
                  </button>
                </div>
              </div>
            </div>
            
            <!-- æ·»åŠ ä»»åŠ¡è¡¨å• -->
            <div class="bg-neutral rounded-lg p-4">
              <h3 class="text-xl font-semibold mb-4">æ·»åŠ æ–°ä»»åŠ¡</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div class="md:col-span-2">
                  <label class="block text-text-light mb-2">ä»»åŠ¡åç§°</label>
                  <input type="text" id="task-title" class="w-full px-4 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary" placeholder="è¾“å…¥ä»»åŠ¡åç§°">
                </div>
                <div>
                  <label class="block text-text-light mb-2">ç§¯åˆ†å¥–åŠ±</label>
                  <input type="number" id="task-points" class="w-full px-4 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary" value="10" min="1" max="100">
                </div>
                <div>
                  <label class="block text-text-light mb-2">ä»»åŠ¡ç±»å‹</label>
                  <select id="task-type" class="w-full px-4 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary">
                    <option value="normal">æ™®é€šä»»åŠ¡</option>
                    <option value="habit">ä¹ æƒ¯ä»»åŠ¡</option>
                  </select>
                </div>
                <div id="habit-options-container" class="hidden md:col-span-2">
                  <label class="block text-text-light mb-2">ä¹ æƒ¯ä»»åŠ¡è®¾ç½®</label>
                  <div class="flex items-center gap-4">
                    <div class="flex items-center">
                      <input type="checkbox" id="habit-is-daily" class="w-5 h-5 mr-2 rounded border-neutral-dark text-primary focus:ring-secondary">
                      <label for="habit-is-daily">æ¯å¤©é‡å¤ï¼ˆæ°¸ä¹…ï¼‰</label>
                    </div>
                    <div id="habit-days-container" class="flex-1">
                      <label class="block text-text-light mb-2">æŒç»­å¤©æ•°ï¼ˆéæ°¸ä¹…æ—¶ç”Ÿæ•ˆï¼‰</label>
                      <input type="number" id="habit-days" class="w-full px-4 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary" value="7" min="1" max="365">
                    </div>
                  </div>
                </div>
              </div>
              <button id="add-task-btn" class="bg-primary text-white px-6 py-2 rounded-lg shadow hover:bg-opacity-90 transition-all-300">
                <i class="fa fa-plus mr-2"></i>æ·»åŠ ä»»åŠ¡
              </button>
            </div>
          </div>
          
          <!-- å¿ƒæ„¿å•å†…å®¹ -->
          <div id="wishes-content" class="p-6 hidden">
            <!-- å¿ƒæ„¿åˆ—è¡¨ -->
            <h3 class="text-xl font-semibold mb-4">å¿ƒæ„¿åˆ—è¡¨</h3>
            <div id="wishes-list" class="space-y-3 mb-6">
              <!-- å¿ƒæ„¿é¡¹åŠ¨æ€æ·»åŠ  -->
              <div class="wish-item bg-neutral rounded-lg p-4">
                <div class="flex justify-between items-start mb-2">
                  <h4 class="font-medium">è´­ä¹°æ–°ä¹¦</h4>
                  <div class="flex items-center gap-2">
                    <span class="text-sm bg-accent text-white px-2 py-1 rounded-full">50ç§¯åˆ†</span>
                    <button class="delete-wish-btn text-text-light hover:text-red-500" data-id="demo">
                      <i class="fa fa-trash"></i>
                    </button>
                  </div>
                </div>
                <p class="text-sm text-text-light mb-3">ä¸€æœ¬å…³äºæ—¶é—´ç®¡ç†çš„ä¹¦ç±</p>
                <button class="redeem-wish-btn bg-primary text-white px-4 py-1 rounded-lg text-sm shadow hover:bg-opacity-90 transition-all-300">
                  å…‘æ¢å¿ƒæ„¿
                </button>
              </div>
            </div>
            
            <!-- æ·»åŠ å¿ƒæ„¿è¡¨å• -->
            <div class="bg-neutral rounded-lg p-4">
              <h3 class="text-xl font-semibold mb-4">æ·»åŠ æ–°å¿ƒæ„¿</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div class="md:col-span-2">
                  <label class="block text-text-light mb-2">å¿ƒæ„¿åç§°</label>
                  <input type="text" id="wish-title" class="w-full px-4 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary" placeholder="è¾“å…¥å¿ƒæ„¿åç§°">
                </div>
                <div>
                  <label class="block text-text-light mb-2">æ‰€éœ€ç§¯åˆ†</label>
                  <input type="number" id="wish-points" class="w-full px-4 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary" value="50" min="1" max="1000">
                </div>
                <div class="md:col-span-2">
                  <label class="block text-text-light mb-2">å¿ƒæ„¿æè¿°ï¼ˆå¯é€‰ï¼‰</label>
                  <textarea id="wish-description" class="w-full px-4 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary" rows="2" placeholder="æè¿°ä½ çš„å¿ƒæ„¿"></textarea>
                </div>
              </div>
              <button id="add-wish-btn" class="bg-primary text-white px-6 py-2 rounded-lg shadow hover:bg-opacity-90 transition-all-300">
                <i class="fa fa-plus mr-2"></i>æ·»åŠ å¿ƒæ„¿
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- è¯´æ˜æ¨¡æ€æ¡† -->
  <div id="info-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto">
      <div class="flex justify-between items-center mb-6 pb-4 border-b border-neutral-dark">
        <h3 class="text-2xl font-semibold text-primary">å…³äºPomoReward</h3>
        <button id="close-info-modal" class="text-text-light hover:text-text text-xl">
          <i class="fa fa-times"></i>
        </button>
      </div>
      
      <!-- åŠŸèƒ½è¯´æ˜ -->
      <div class="mb-8">
        <h4 class="text-xl font-semibold mb-4 flex items-center">
          <i class="fa fa-list-ul text-primary mr-2"></i>åŠŸèƒ½è¯´æ˜
        </h4>
        <div class="space-y-3 text-text-light">
          <div class="bg-neutral p-4 rounded-lg">
            <h5 class="font-medium text-text mb-2">ğŸ… ä¸“æ³¨ç•ªèŒ„é’Ÿ</h5>
            <p>è‡ªå®šä¹‰ä¸“æ³¨æ—¶é•¿å’Œä¼‘æ¯æ—¶é•¿ï¼Œé€‰æ‹©ä¸åŒçš„ä¸“æ³¨æ¨¡å—è·å¾—å¯¹åº”ç§¯åˆ†å¥–åŠ±ï¼Œå¸®åŠ©ä½ é«˜æ•ˆä¸“æ³¨å®Œæˆä»»åŠ¡ã€‚</p>
          </div>
          <div class="bg-neutral p-4 rounded-lg">
            <h5 class="font-medium text-text mb-2">ğŸ“‹ ä»»åŠ¡ç®¡ç†</h5>
            <p>æ”¯æŒæ·»åŠ æ™®é€šä»»åŠ¡å’Œä¹ æƒ¯ä»»åŠ¡ï¼Œä¹ æƒ¯ä»»åŠ¡å¯è®¾ç½®æ¯æ—¥é‡å¤æˆ–é™æ—¶å®Œæˆï¼Œå®Œæˆä»»åŠ¡è·å¾—ç§¯åˆ†å¥–åŠ±ã€‚</p>
          </div>
          <div class="bg-neutral p-4 rounded-lg">
            <h5 class="font-medium text-text mb-2">â­ å¿ƒæ„¿æ¸…å•</h5>
            <p>æ·»åŠ å¿ƒæ„¿å¹¶è®¾ç½®æ‰€éœ€ç§¯åˆ†ï¼Œç”¨å®Œæˆä»»åŠ¡å’Œä¸“æ³¨è·å¾—çš„ç§¯åˆ†å…‘æ¢å¿ƒæ„¿ï¼Œæ¿€åŠ±è‡ªå·±æŒç»­è¿›æ­¥ã€‚</p>
          </div>
          <div class="bg-neutral p-4 rounded-lg">
            <h5 class="font-medium text-text mb-2">ğŸ”§ æ¨¡å—ç®¡ç†</h5>
            <p>è‡ªå®šä¹‰ä¸“æ³¨æ¨¡å—ï¼Œè®¾ç½®ä¸åŒæ¨¡å—çš„ç§¯åˆ†å¥–åŠ±ï¼Œé€‚é…ä¸åŒç±»å‹çš„ä¸“æ³¨åœºæ™¯ã€‚</p>
          </div>
        </div>
      </div>
      
      <!-- ä½œè€…ä¿¡æ¯ -->
      <div class="mb-8">
        <h4 class="text-xl font-semibold mb-4 flex items-center">
          <i class="fa fa-user text-primary mr-2"></i>ä½œè€…ä¿¡æ¯
        </h4>
        <div class="bg-neutral p-4 rounded-lg">
          <p class="mb-2"><span class="font-medium text-text">ä½œè€…ï¼š</span>èŠ™è•¾Frey</p>
          <p class="mb-2"><span class="font-medium text-text">é‚®ç®±ï¼š</span>frey1799504732@Gmail.com</p>
        </div>
      </div>
      
      <!-- ç‰ˆæœ¬ä¿¡æ¯ -->
      <div class="mb-8">
        <h4 class="text-xl font-semibold mb-4 flex items-center">
          <i class="fa fa-tag text-primary mr-2"></i>ç‰ˆæœ¬ä¿¡æ¯
        </h4>
        <div class="bg-neutral p-4 rounded-lg">
          <p class="mb-2"><span class="font-medium text-text">ç‰ˆæœ¬å·ï¼š</span>v1.1.2</p>
          <p class="mb-4"><span class="font-medium text-text">æ›´æ–°æ—¥æœŸï¼š</span>2025-02</p>
          <div class="mb-3">
            <p class="font-medium text-text mb-2">æ–°å¢åŠŸèƒ½ï¼š</p>
            <ul class="list-disc list-inside text-sm space-y-1 ml-2">
              <li>è‡ªç”±æ¨¡å¼ï¼šæ”¯æŒæ­£è®¡æ—¶ï¼Œä¸å—å›ºå®šæ—¶é•¿é™åˆ¶ï¼Œè¿›åº¦æ¡å§‹ç»ˆ100%</li>
              <li>ç‹¬ç«‹æ¨¡å¼åˆ‡æ¢ï¼šä¸“æ³¨å’Œä¼‘æ¯å¯åˆ†åˆ«é€‰æ‹©ç•ªèŒ„é’Ÿæˆ–è‡ªç”±æ¨¡å¼</li>
            </ul>
          </div>
          <div class="mb-3">
            <p class="font-medium text-text mb-2">åŠŸèƒ½ä¼˜åŒ–ï¼š</p>
            <ul class="list-disc list-inside text-sm space-y-1 ml-2">
              <li>ç®€åŒ–æ§åˆ¶æŒ‰é’®ï¼šåŸ"å¼€å§‹"ã€"é‡ç½®"ä¸¤ä¸ªæŒ‰é’®æ•´åˆä¸ºä¸€ä¸ªæ™ºèƒ½åˆ‡æ¢æŒ‰é’®</li>
              <li>ä¸€é”®çŠ¶æ€åˆ‡æ¢ï¼šç‚¹å‡»æŒ‰é’®å³å¯åœ¨ä¸“æ³¨å’Œä¼‘æ¯çŠ¶æ€é—´å¿«é€Ÿåˆ‡æ¢</li>
            </ul>
          </div>
          <div>
            <p class="font-medium text-text mb-2">Bugä¿®å¤ï¼š</p>
            <ul class="list-disc list-inside text-sm space-y-1 ml-2">
              <li>ä¿®å¤ä»£ç å®Œæ•´æ€§ï¼šè¡¥å…¨åŸç‰ˆæœ¬ä»£ç ç»“å°¾ç¼ºå¤±éƒ¨åˆ†ï¼Œç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸è¿è¡Œ</li>
              <li>å›¾æ ‡åŠ è½½å¼‚å¸¸ä¿®å¤ï¼šå°†å›¾æ ‡åº“CDNæ›¿æ¢ä¸ºå›½å†…æºï¼Œç¡®ä¿å›¾æ ‡æ­£å¸¸æ˜¾ç¤º</li>
            </ul>
          </div>
        </div>
      </div>
      
      <!-- GitHubé“¾æ¥ -->
      <div>
        <h4 class="text-xl font-semibold mb-4 flex items-center">
          <i class="fa fa-github text-primary mr-2"></i>å¼€æºåœ°å€
        </h4>
        <div class="bg-neutral p-4 rounded-lg">
          <a href="https://github.com/freytesla/PomoReward" target="_blank" id="github-link" class="flex items-center text-primary hover:underline">
            <i class="fa fa-github-square text-2xl mr-3"></i>
            <span>https://github.com/freytesla/PomoReward</span>
          </a>
          <p class="mt-3 text-sm text-text-light">æ¬¢è¿Starã€Forkå’ŒæIssueï¼</p>
        </div>
      </div>
    </div>
  </div>

  <!-- ä¸“æ³¨æ¨¡å—ç®¡ç†æ¨¡æ€æ¡† -->
  <div id="module-manager-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl p-6 w-full max-w-md">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-semibold">ç®¡ç†ä¸“æ³¨æ¨¡å—</h3>
        <button id="close-module-manager" class="text-text-light hover:text-text">
          <i class="fa fa-times"></i>
        </button>
      </div>
      
      <!-- æ·»åŠ æ–°æ¨¡å— -->
      <div class="border-b border-neutral-dark pb-4 mb-4">
        <h4 class="font-medium mb-3">æ·»åŠ æ–°æ¨¡å—</h4>
        <div class="grid grid-cols-2 gap-3 mb-3">
          <div>
            <label class="block text-text-light text-sm mb-1">æ¨¡å—åç§°</label>
            <input type="text" id="new-module-name" class="w-full px-3 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary text-sm" placeholder="ä¾‹å¦‚ï¼šç»˜ç”»">
          </div>
          <div>
            <label class="block text-text-light text-sm mb-1">æ¯åˆ†é’Ÿç§¯åˆ†</label>
            <input type="number" id="new-module-points" class="w-full px-3 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary text-sm" value="1" min="1" max="10">
          </div>
        </div>
        <button id="add-new-module" class="bg-primary text-white px-4 py-2 rounded-lg text-sm shadow hover:bg-opacity-90 transition-all-300">
          <i class="fa fa-plus mr-1"></i>æ·»åŠ 
        </button>
      </div>
      
      <!-- ç°æœ‰æ¨¡å—åˆ—è¡¨ -->
      <div>
        <h4 class="font-medium mb-3">ç°æœ‰æ¨¡å—</h4>
        <div id="module-list" class="space-y-2 max-h-60 overflow-y-auto">
          <!-- æ¨¡å—é¡¹åŠ¨æ€ç”Ÿæˆ -->
        </div>
      </div>
    </div>
  </div>

  <!-- ç¼–è¾‘æ¨¡å—æ¨¡æ€æ¡† -->
  <div id="edit-module-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl p-6 w-full max-w-md">
      <h3 class="text-xl font-semibold mb-4">ç¼–è¾‘æ¨¡å—</h3>
      <input type="hidden" id="edit-module-id">
      <div class="grid grid-cols-2 gap-3 mb-4">
        <div>
          <label class="block text-text-light text-sm mb-1">æ¨¡å—åç§°</label>
          <input type="text" id="edit-module-name" class="w-full px-3 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary text-sm">
        </div>
        <div>
          <label class="block text-text-light text-sm mb-1">æ¯åˆ†é’Ÿç§¯åˆ†</label>
          <input type="number" id="edit-module-points" class="w-full px-3 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary text-sm" min="1" max="10">
        </div>
      </div>
      <div class="flex justify-end gap-3">
        <button id="cancel-edit-module" class="px-4 py-2 border border-neutral-dark rounded-lg hover:bg-neutral transition-all-300 text-sm">å–æ¶ˆ</button>
        <button id="save-edit-module" class="bg-primary text-white px-4 py-2 rounded-lg shadow hover:bg-opacity-90 transition-all-300 text-sm">ä¿å­˜</button>
      </div>
    </div>
  </div>

  <!-- è‡ªå®šä¹‰ä¸“æ³¨æ¨¡å—æ¨¡æ€æ¡†ï¼ˆå…¼å®¹æ—§é€»è¾‘ï¼‰ -->
  <div id="custom-module-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl p-6 w-full max-w-md">
      <h3 class="text-xl font-semibold mb-4">è‡ªå®šä¹‰ä¸“æ³¨æ¨¡å—</h3>
      <div class="mb-4">
        <label class="block text-text-light mb-2">æ¨¡å—åç§°</label>
        <input type="text" id="custom-module-name" class="w-full px-4 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary" placeholder="è¾“å…¥æ¨¡å—åç§°">
      </div>
      <div class="mb-6">
        <label class="block text-text-light mb-2">æ¯åˆ†é’Ÿç§¯åˆ†</label>
        <input type="number" id="custom-module-points" class="w-full px-4 py-2 rounded-lg border border-neutral-dark focus:outline-none focus:ring-2 focus:ring-secondary" value="1" min="1" max="10">
      </div>
      <div class="flex justify-end gap-3">
        <button id="cancel-custom-module" class="px-4 py-2 border border-neutral-dark rounded-lg hover:bg-neutral transition-all-300">å–æ¶ˆ</button>
        <button id="save-custom-module" class="bg-primary text-white px-4 py-2 rounded-lg shadow hover:bg-opacity-90 transition-all-300">ä¿å­˜</button>
      </div>
    </div>
  </div>

  <!-- å…¨å±€é‡ç½®ç¡®è®¤æ¨¡æ€æ¡† -->
  <div id="global-reset-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl p-6 w-full max-w-md">
      <div class="text-center mb-6">
        <i class="fa fa-warning text-4xl text-amber-500 mb-4"></i>
        <h3 class="text-xl font-semibold text-red-500">è­¦å‘Šï¼</h3>
        <p class="text-text-light mt-2">æ­¤æ“ä½œå°†æ¸…ç©ºæ‰€æœ‰ä»»åŠ¡ã€å¿ƒæ„¿ã€ç§¯åˆ†å’Œè‡ªå®šä¹‰æ¨¡å—ï¼Œæ¢å¤åˆ°åˆå§‹çŠ¶æ€ã€‚</p>
        <p class="text-red-500 font-medium mt-1">è¯¥æ“ä½œä¸å¯æ’¤é”€ï¼</p>
      </div>
      <div class="flex justify-center gap-4">
        <button id="cancel-global-reset" class="px-6 py-2 border border-neutral-dark rounded-lg hover:bg-neutral transition-all-300">
          å–æ¶ˆ
        </button>
        <button id="confirm-global-reset" class="px-6 py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition-all-300">
          ç¡®è®¤é‡ç½®
        </button>
      </div>
    </div>
  </div>

  <!-- æç¤ºå¼¹çª— -->
  <div id="task-complete-toast" class="fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all-300 z-50 flex items-center">
    <i class="fa fa-check text-2xl mr-3"></i>
    <div>
      <p class="font-medium">ä»»åŠ¡å®Œæˆï¼</p>
      <p class="text-sm" id="task-complete-points">è·å¾— 10 ç§¯åˆ†</p>
    </div>
  </div>

  <div id="wish-redeem-toast" class="fixed bottom-4 right-4 bg-accent text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all-300 z-50 flex items-center">
    <i class="fa fa-star text-2xl mr-3"></i>
    <div>
      <p class="font-medium">å¿ƒæ„¿å…‘æ¢æˆåŠŸï¼</p>
      <p class="text-sm" id="wish-redeem-message">æ­å–œä½ å®ç°äº†å¿ƒæ„¿</p>
    </div>
  </div>

  <div id="focus-complete-toast" class="fixed bottom-4 right-4 bg-primary text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all-300 z-50 flex items-center">
    <i class="fa fa-check-circle text-2xl mr-3"></i>
    <div>
      <p class="font-medium">ä¸“æ³¨æ—¶é—´å®Œæˆï¼</p>
      <p class="text-sm" id="focus-complete-points">è·å¾— 25 ç§¯åˆ†</p>
    </div>
  </div>

  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
    // å·¥å…·å‡½æ•°ï¼šæ ¼å¼åŒ–æ—¥æœŸæ˜¾ç¤º
    function formatCurrentDate() {
      const now = new Date();
      // å®šä¹‰ä¸­æ–‡æ˜ŸæœŸåç§°
      const weekdays = ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­'];
      
      // è·å–æ—¥æœŸç»„ä»¶
      const year = now.getFullYear();
      const month = now.getMonth() + 1; // æœˆä»½ä»0å¼€å§‹ï¼Œæ‰€ä»¥+1
      const day = now.getDate();
      const weekday = weekdays[now.getDay()];
      
      // æ ¼å¼åŒ–æ˜¾ç¤ºï¼ˆä¾‹å¦‚ï¼š2026å¹´2æœˆ15æ—¥ æ˜ŸæœŸæ—¥ï¼‰
      return `${year}å¹´${month}æœˆ${day}æ—¥ ${weekday}`;
    }

    // æ¸²æŸ“å½“å‰æ—¥æœŸåˆ°é¡µé¢
    function renderCurrentDate() {
      const dateElement = document.getElementById('current-date');
      if (dateElement) {
        dateElement.textContent = formatCurrentDate();
      }
    }

    // å®šæ—¶æ£€æŸ¥å¹¶æ›´æ–°æ—¥æœŸï¼ˆæ ¸å¿ƒè‡ªåŠ¨æ›´æ–°é€»è¾‘ï¼‰
    function setupAutoDateUpdate() {
      // åˆå§‹åŒ–å…ˆæ¸²æŸ“ä¸€æ¬¡
      renderCurrentDate();

      // æ¯éš”1åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼ˆ1åˆ†é’Ÿ=60*1000æ¯«ç§’ï¼‰
      setInterval(() => {
        // é‡æ–°æ¸²æŸ“æ—¥æœŸï¼ˆå³ä½¿æ²¡è·¨å¤©ï¼Œä¹Ÿèƒ½å¤„ç†æ—¶åˆ†ç§’çº§çš„ä¿®æ­£ï¼‰
        renderCurrentDate();
        
        // ã€å¯é€‰ä¼˜åŒ–ã€‘ä»…å½“æ—¥æœŸå‘ç”Ÿå˜åŒ–æ—¶æ‰æ›´æ–°ï¼ˆå‡å°‘DOMæ“ä½œï¼‰
        // const currentDisplay = document.getElementById('current-date').textContent;
        // const newDate = formatCurrentDate();
        // if (currentDisplay !== newDate) {
        //   renderCurrentDate();
        // }
      }, 60 * 1000);
    }

    // æ•°æ®ç®¡ç†
    const AppData = {
      tasks: [],
      wishes: [],
      points: 0,
      // åˆå§‹æ¨¡å—
      focusModules: [
        { id: 'default', name: 'é»˜è®¤', pointsPerMinute: 1 },
        { id: 'reading', name: 'é˜…è¯»', pointsPerMinute: 2 },
        { id: 'coding', name: 'ç¼–ç¨‹', pointsPerMinute: 3 }
      ],
      currentFocusModule: 'default',
      settings: {
        focusTime: 25,
        breakTime: 5
      },
      
      // åˆå§‹åŒ–æ•°æ®
      init() {
        const savedData = localStorage.getItem('timeManagementApp');
        if (savedData) {
          const parsedData = JSON.parse(savedData);
          this.tasks = parsedData.tasks || [];
          this.wishes = parsedData.wishes || [];
          this.points = parsedData.points || 0;
          this.focusModules = parsedData.focusModules || this.focusModules;
          this.currentFocusModule = parsedData.currentFocusModule || 'default';
          this.settings = parsedData.settings || this.settings;
          this.checkHabitTasks();
        }
        // ç¡®ä¿è‡³å°‘ä¿ç•™ä¸€ä¸ªæ¨¡å—
        if (this.focusModules.length === 0) {
          this.focusModules.push({ id: 'default', name: 'é»˜è®¤', pointsPerMinute: 1 });
          this.currentFocusModule = 'default';
        }
        this.saveData();
      },
      
      // ä¿å­˜æ•°æ®åˆ°localStorage
      saveData() {
        const dataToSave = {
          tasks: this.tasks,
          wishes: this.wishes,
          points: this.points,
          focusModules: this.focusModules,
          currentFocusModule: this.currentFocusModule,
          settings: this.settings
        };
        localStorage.setItem('timeManagementApp', JSON.stringify(dataToSave));
      },
      
      // å…¨å±€é‡ç½®ï¼ˆæ¢å¤åˆå§‹çŠ¶æ€ï¼‰
      resetAll() {
        // é‡ç½®ä¸ºåˆå§‹æ•°æ®
        this.tasks = [];
        this.wishes = [];
        this.points = 0;
        this.focusModules = [
          { id: 'default', name: 'é»˜è®¤', pointsPerMinute: 1 },
          { id: 'reading', name: 'é˜…è¯»', pointsPerMinute: 2 },
          { id: 'coding', name: 'ç¼–ç¨‹', pointsPerMinute: 3 }
        ];
        this.currentFocusModule = 'default';
        this.settings = {
          focusTime: 25,
          breakTime: 5
        };
        this.saveData();
      },
      
      // æ·»åŠ ä»»åŠ¡
      addTask(title, points, type, habitDays = 0, isDaily = false) {
        const task = {
          id: Date.now().toString(),
          title,
          points: parseInt(points),
          type,
          completed: false,
          createdAt: new Date().toISOString(),
          isDaily: type === 'habit' ? isDaily : false, // æ˜¯å¦æ¯å¤©é‡å¤
          habitDays: type === 'habit' && !isDaily ? parseInt(habitDays) : 0,
          expireDate: type === 'habit' && !isDaily ? this.calculateExpireDate(habitDays) : null
        };
        this.tasks.push(task);
        this.saveData();
        return task;
      },
      
      // è®¡ç®—ä¹ æƒ¯ä»»åŠ¡çš„è¿‡æœŸæ—¥æœŸ
      calculateExpireDate(days) {
        const date = new Date();
        date.setDate(date.getDate() + days);
        return date.toISOString();
      },
      
      // å®Œæˆä»»åŠ¡
      completeTask(taskId) {
        const task = this.tasks.find(t => t.id === taskId);
        if (task && !task.completed) {
          task.completed = true;
          task.completedAt = new Date().toISOString();
          this.points += task.points;
          this.saveData();
          return task.points;
        }
        return 0;
      },
      
      // åˆ é™¤ä»»åŠ¡
      deleteTask(taskId) {
        this.tasks = this.tasks.filter(t => t.id !== taskId);
        this.saveData();
      },

      //åˆ é™¤å¿ƒæ„¿æ–¹æ³•
      deleteWish(wishId) {
        this.wishes = this.wishes.filter(w => w.id !== wishId);
        this.saveData();
      },
      
      // æ£€æŸ¥ä¹ æƒ¯ä»»åŠ¡æ˜¯å¦éœ€è¦é‡ç½®
      checkHabitTasks() {
        const today = new Date().toDateString();
        const yesterday = new Date();
        yesterday.setDate(yesterday.getDate() - 1);
        const yesterdayString = yesterday.toDateString();
        
        this.tasks.forEach(task => {
          if (task.type === 'habit' && task.completed) {
            const completedDate = new Date(task.completedAt).toDateString();
            // æ— è®ºæ˜¯å¦æ°¸ä¹…ï¼Œåªè¦æ˜¯æ˜¨å¤©å®Œæˆçš„éƒ½é‡ç½®
            if (completedDate === yesterdayString) {
              task.completed = false;
              delete task.completedAt;
            }
          }
          // åªæ¸…ç†éæ°¸ä¹…ä¸”è¿‡æœŸçš„ä¹ æƒ¯ä»»åŠ¡
          if (task.type === 'habit' && !task.isDaily && task.expireDate) {
            const expireDate = new Date(task.expireDate);
            if (new Date() > expireDate) {
              this.tasks = this.tasks.filter(t => t.id !== task.id); // ä¿®å¤ï¼šåŸä»£ç ç”¨äº†æœªå®šä¹‰çš„taskId
            }
          }
        });
        this.saveData();
      },
      
      // æ·»åŠ å¿ƒæ„¿
      addWish(title, points, description = '') {
        const wish = {
          id: Date.now().toString(),
          title,
          points: parseInt(points),
          description,
          redeemed: false,
          createdAt: new Date().toISOString()
        };
        this.wishes.push(wish);
        this.saveData();
        return wish;
      },
      
      // å…‘æ¢å¿ƒæ„¿
      redeemWish(wishId) {
        const wish = this.wishes.find(w => w.id === wishId);
        if (wish && !wish.redeemed && this.points >= wish.points) {
          wish.redeemed = true;
          wish.redeemedAt = new Date().toISOString();
          this.points -= wish.points;
          this.saveData();
          return true;
        }
        return false;
      },
      
      // æ·»åŠ è‡ªå®šä¹‰ä¸“æ³¨æ¨¡å—
      addFocusModule(name, pointsPerMinute) {
        const module = {
          id: 'custom-' + Date.now().toString(),
          name,
          pointsPerMinute: parseInt(pointsPerMinute)
        };
        this.focusModules.push(module);
        this.currentFocusModule = module.id;
        this.saveData();
        return module;
      },
      
      // ç¼–è¾‘ä¸“æ³¨æ¨¡å—ï¼ˆæ‰€æœ‰æ¨¡å—éƒ½å¯ç¼–è¾‘ï¼‰
      editFocusModule(moduleId, newName, newPoints) {
        const module = this.focusModules.find(m => m.id === moduleId);
        if (module) {
          module.name = newName;
          module.pointsPerMinute = parseInt(newPoints);
          this.saveData();
          return true;
        }
        return false;
      },
      
      // åˆ é™¤ä¸“æ³¨æ¨¡å—ï¼ˆæ‰€æœ‰æ¨¡å—éƒ½å¯åˆ é™¤ï¼Œè‡³å°‘ä¿ç•™ä¸€ä¸ªï¼‰
      deleteFocusModule(moduleId) {
        // ç¡®ä¿è‡³å°‘ä¿ç•™ä¸€ä¸ªæ¨¡å—
        if (this.focusModules.length <= 1) {
          alert('è‡³å°‘éœ€è¦ä¿ç•™ä¸€ä¸ªä¸“æ³¨æ¨¡å—ï¼');
          return false;
        }
        
        const moduleIndex = this.focusModules.findIndex(m => m.id === moduleId);
        if (moduleIndex !== -1) {
          // å¦‚æœåˆ é™¤çš„æ˜¯å½“å‰é€‰ä¸­çš„æ¨¡å—ï¼Œåˆ‡æ¢åˆ°ç¬¬ä¸€ä¸ªæ¨¡å—
          if (this.currentFocusModule === moduleId) {
            this.currentFocusModule = this.focusModules[0].id !== moduleId 
              ? this.focusModules[0].id 
              : this.focusModules[1].id;
          }
          this.focusModules.splice(moduleIndex, 1);
          this.saveData();
          return true;
        }
        return false;
      },
      
      // è·å–å½“å‰ä¸“æ³¨æ¨¡å—
      getCurrentFocusModule() {
        return this.focusModules.find(m => m.id === this.currentFocusModule) || this.focusModules[0];
      },
      
      // æ›´æ–°è®¾ç½®
      updateSettings(focusTime, breakTime) {
        this.settings.focusTime = parseInt(focusTime);
        this.settings.breakTime = parseInt(breakTime);
        this.saveData();
      }
    };
    
    // ç•ªèŒ„é’ŸåŠŸèƒ½
    const PomodoroTimer = {
      timer: null,
      timeLeft: 25 * 60,
      isRunning: false,
      isBreak: true, // åˆå§‹ä¸ºtrueï¼Œè¿™æ ·ç¬¬ä¸€æ¬¡toggleä¼šåˆ‡æ¢åˆ°ä¸“æ³¨çŠ¶æ€
      focusFreeMode: false,
      breakFreeMode: false,
      elapsedTime: 0, // ç”¨äºè‡ªç”±æ¨¡å¼çš„æ­£è®¡æ—¶
      
      // åˆå§‹åŒ–ç•ªèŒ„é’Ÿ
      init() {
        this.timeLeft = AppData.settings.focusTime * 60;
        this.updateDisplay();
        this.setupEventListeners();
        // è®¾ç½®åˆå§‹æŒ‰é’®æ–‡å­—å’Œæ ‡ç­¾
        document.getElementById('toggle-state-text').textContent = 'å¼€å§‹ä¸“æ³¨';
        document.getElementById('timer-label').textContent = 'å¾…å¼€å§‹';
      },
      
      // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
      setupEventListeners() {
        // åˆ‡æ¢çŠ¶æ€æŒ‰é’®ï¼ˆåœ¨ä¸“æ³¨å’Œä¼‘æ¯ä¹‹é—´åˆ‡æ¢ï¼‰
        document.getElementById('toggle-state-btn').addEventListener('click', () => this.toggleState());
        
        // ä¸“æ³¨æ—¶é•¿å˜åŒ–
        document.getElementById('focus-time').addEventListener('change', (e) => {
          AppData.updateSettings(e.target.value, AppData.settings.breakTime);
          if (!this.isRunning && !this.isBreak) {
            this.reset();
          }
        });
        
        // ä¼‘æ¯æ—¶é•¿å˜åŒ–
        document.getElementById('break-time').addEventListener('change', (e) => {
          AppData.updateSettings(AppData.settings.focusTime, e.target.value);
        });
        
        // ä¸“æ³¨è‡ªç”±æ¨¡å¼åˆ‡æ¢
        document.getElementById('focus-free-mode').addEventListener('change', (e) => {
          this.focusFreeMode = e.target.checked;
          if (!this.isBreak) {
            this.updateDisplay();
          }
        });
        
        // ä¼‘æ¯è‡ªç”±æ¨¡å¼åˆ‡æ¢
        document.getElementById('break-free-mode').addEventListener('change', (e) => {
          this.breakFreeMode = e.target.checked;
          if (this.isBreak) {
            this.updateDisplay();
          }
        });
      },
      
      // åˆ‡æ¢ä¸“æ³¨/ä¼‘æ¯çŠ¶æ€
      toggleState() {
        // å¦‚æœæ­£åœ¨è¿è¡Œï¼Œå…ˆåœæ­¢
        if (this.isRunning) {
          this.pause();
        }
        
        // åˆ‡æ¢çŠ¶æ€
        this.isBreak = !this.isBreak;
        
        // é‡ç½®æ—¶é—´å’Œå·²ç”¨æ—¶é—´
        if (this.isBreak) {
          this.timeLeft = AppData.settings.breakTime * 60;
          this.elapsedTime = 0;
          document.getElementById('timer-label').textContent = 'ä¼‘æ¯ä¸­';
          document.getElementById('toggle-state-text').textContent = 'å¼€å§‹ä¸“æ³¨';
        } else {
          this.timeLeft = AppData.settings.focusTime * 60;
          this.elapsedTime = 0;
          document.getElementById('timer-label').textContent = 'ä¸“æ³¨ä¸­';
          document.getElementById('toggle-state-text').textContent = 'å¼€å§‹ä¼‘æ¯';
        }
        
        this.updateDisplay();
        this.start();
      },
      
      // å¼€å§‹è®¡æ—¶å™¨
      // åœ¨ PomodoroTimer çš„ start æ–¹æ³•ä¸­è¡¥å……ç§¯åˆ†ç´¯åŠ é€»è¾‘
      start() {
        if (this.isRunning) return;
        this.isRunning = true;
        
        // è®°å½•å½“å‰å·²ç´¯è®¡çš„åˆ†é’Ÿæ•°ï¼ˆé¿å…é‡å¤ç´¯åŠ ï¼‰
        let accumulatedMinutes = 0;
        const isFreeMode = this.isBreak ? this.breakFreeMode : this.focusFreeMode;
        
        // å¦‚æœä¸æ˜¯è‡ªç”±æ¨¡å¼ï¼Œè®°å½•æ€»ç§’æ•°
        const totalSeconds = isFreeMode ? 0 : this.timeLeft;
        
        this.timer = setInterval(() => {
          if (isFreeMode) {
            // è‡ªç”±æ¨¡å¼ï¼šæ­£è®¡æ—¶
            this.elapsedTime++;
            this.updateDisplay();
            
            // ä¸“æ³¨çŠ¶æ€ä¸‹ï¼Œæ¯åˆ†é’Ÿç´¯åŠ ç§¯åˆ†
            if (!this.isBreak) {
              const currentMinutes = Math.floor(this.elapsedTime / 60);
              if (currentMinutes > accumulatedMinutes) {
                accumulatedMinutes = currentMinutes;
                const currentModule = AppData.getCurrentFocusModule();
                const pointsToAdd = currentModule.pointsPerMinute;
                AppData.points += pointsToAdd;
                AppData.saveData();
                document.getElementById('points-display').textContent = AppData.points;
              }
            }
          } else {
            // ç•ªèŒ„é’Ÿæ¨¡å¼ï¼šå€’è®¡æ—¶
            this.timeLeft--;
            this.updateDisplay();
            
            // ä¸“æ³¨çŠ¶æ€ä¸‹ï¼Œæ¯åˆ†é’Ÿç´¯åŠ ç§¯åˆ†
            if (!this.isBreak) {
              const passedSeconds = totalSeconds - this.timeLeft;
              const currentMinutes = Math.floor(passedSeconds / 60);
              
              if (currentMinutes > accumulatedMinutes) {
                accumulatedMinutes = currentMinutes;
                const currentModule = AppData.getCurrentFocusModule();
                const pointsToAdd = currentModule.pointsPerMinute;
                AppData.points += pointsToAdd;
                AppData.saveData();
                document.getElementById('points-display').textContent = AppData.points;
              }
            }
            
            if (this.timeLeft <= 0) {
              this.complete();
            }
          }
        }, 1000);
      },
      
      // æš‚åœè®¡æ—¶å™¨
      pause() {
        if (this.isRunning) {
          this.isRunning = false;
          clearInterval(this.timer);
        }
      },
      
      // é‡ç½®è®¡æ—¶å™¨
      reset() {
        this.pause();
        this.isBreak = true; // é‡ç½®åˆ°åˆå§‹çŠ¶æ€
        this.timeLeft = AppData.settings.focusTime * 60;
        this.elapsedTime = 0;
        this.updateDisplay();
        document.getElementById('timer-label').textContent = 'å¾…å¼€å§‹';
        document.getElementById('toggle-state-text').textContent = 'å¼€å§‹ä¸“æ³¨';
      },
      
      // å®Œæˆå½“å‰è®¡æ—¶
      complete() {
        this.pause();
        
        if (!this.isBreak) {
          // ä¸“æ³¨æ—¶é—´å®Œæˆï¼Œè·å¾—ç§¯åˆ†
          const module = AppData.getCurrentFocusModule();
          const pointsEarned = AppData.settings.focusTime * module.pointsPerMinute;
          AppData.points += pointsEarned;
          AppData.saveData();
          UI.updatePointsDisplay();
          UI.showToast('focus-complete-toast', `è·å¾— ${pointsEarned} ç§¯åˆ†`);
          
          // åˆ‡æ¢åˆ°ä¼‘æ¯æ—¶é—´
          this.isBreak = true;
          this.timeLeft = AppData.settings.breakTime * 60;
          this.elapsedTime = 0;
          document.getElementById('timer-label').textContent = 'ä¼‘æ¯ä¸­';
          document.getElementById('toggle-state-text').textContent = 'å¼€å§‹ä¸“æ³¨';
          this.updateDisplay();
        } else {
          // ä¼‘æ¯æ—¶é—´å®Œæˆï¼Œé‡ç½®åˆ°ä¸“æ³¨æ—¶é—´
          this.isBreak = false;
          this.timeLeft = AppData.settings.focusTime * 60;
          this.elapsedTime = 0;
          document.getElementById('timer-label').textContent = 'ä¸“æ³¨ä¸­';
          document.getElementById('toggle-state-text').textContent = 'å¼€å§‹ä¼‘æ¯';
          this.updateDisplay();
        }
      },
      
      // æ›´æ–°æ˜¾ç¤º
      updateDisplay() {
        const isFreeMode = this.isBreak ? this.breakFreeMode : this.focusFreeMode;
        
        if (isFreeMode) {
          // è‡ªç”±æ¨¡å¼ï¼šæ˜¾ç¤ºå·²è¿‡æ—¶é—´ï¼ˆæ­£è®¡æ—¶ï¼‰
          const minutes = Math.floor(this.elapsedTime / 60);
          const seconds = this.elapsedTime % 60;
          const displayTime = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
          document.getElementById('timer-display').textContent = displayTime;
          
          // è¿›åº¦æ¡å§‹ç»ˆ100%
          document.getElementById('progress-circle').style.strokeDashoffset = 0;
        } else {
          // ç•ªèŒ„é’Ÿæ¨¡å¼ï¼šæ˜¾ç¤ºå‰©ä½™æ—¶é—´ï¼ˆå€’è®¡æ—¶ï¼‰
          const minutes = Math.floor(this.timeLeft / 60);
          const seconds = this.timeLeft % 60;
          const displayTime = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
          document.getElementById('timer-display').textContent = displayTime;
          
          // æ›´æ–°è¿›åº¦æ¡
          const totalTime = this.isBreak ? AppData.settings.breakTime * 60 : AppData.settings.focusTime * 60;
          const progress = (1 - this.timeLeft / totalTime) * 283;
          document.getElementById('progress-circle').style.strokeDashoffset = 283 - progress;
        }
      }
    };
    
    // UIç®¡ç†
    const UI = {
      // åˆå§‹åŒ–UI
      init() {
        // è°ƒç”¨è‡ªåŠ¨æ›´æ–°æ—¥æœŸçš„æ–¹æ³•
        setupAutoDateUpdate();
        
        this.setupEventListeners();
        this.renderFocusModules();
        this.renderTasks();
        this.renderWishes();
        this.updatePointsDisplay();
        
        // åˆå§‹åŒ–é€‰é¡¹å¡åˆ‡æ¢
        this.setupTabs();
        
        // åˆå§‹åŒ–ä¹ æƒ¯ä»»åŠ¡é€‰é¡¹æ˜¾ç¤º
        this.setupHabitOptions();
      },
      
      // ç§»é™¤åŸæœ‰çš„setCurrentDateDisplayæ–¹æ³•ï¼Œæ›¿æ¢ä¸ºè°ƒç”¨renderCurrentDate
      
      // è®¾ç½®é€‰é¡¹å¡åˆ‡æ¢
      setupTabs() {
        const tasksTab = document.getElementById('tasks-tab');
        const wishesTab = document.getElementById('wishes-tab');
        const tasksContent = document.getElementById('tasks-content');
        const wishesContent = document.getElementById('wishes-content');
        
        tasksTab.addEventListener('click', () => {
          tasksTab.classList.add('text-primary', 'border-b-2', 'border-primary');
          tasksTab.classList.remove('text-text-light');
          wishesTab.classList.remove('text-primary', 'border-b-2', 'border-primary');
          wishesTab.classList.add('text-text-light');
          tasksContent.classList.remove('hidden');
          wishesContent.classList.add('hidden');
        });
        
        wishesTab.addEventListener('click', () => {
          wishesTab.classList.add('text-primary', 'border-b-2', 'border-primary');
          wishesTab.classList.remove('text-text-light');
          tasksTab.classList.remove('text-primary', 'border-b-2', 'border-primary');
          tasksTab.classList.add('text-text-light');
          wishesContent.classList.remove('hidden');
          tasksContent.classList.add('hidden');
        });
      },
      
      // è®¾ç½®ä¹ æƒ¯ä»»åŠ¡é€‰é¡¹æ˜¾ç¤º/éšè—
      setupHabitOptions() {
        const taskTypeSelect = document.getElementById('task-type');
        const habitOptionsContainer = document.getElementById('habit-options-container');
        const habitIsDaily = document.getElementById('habit-is-daily');
        const habitDaysContainer = document.getElementById('habit-days-container');
        
        // åˆå§‹æ£€æŸ¥
        if (taskTypeSelect.value === 'habit') {
          habitOptionsContainer.classList.remove('hidden');
        }
        
        // ä»»åŠ¡ç±»å‹åˆ‡æ¢
        taskTypeSelect.addEventListener('change', () => {
          if (taskTypeSelect.value === 'habit') {
            habitOptionsContainer.classList.remove('hidden');
          } else {
            habitOptionsContainer.classList.add('hidden');
          }
        });
        
        // æ¯æ—¥é‡å¤åˆ‡æ¢
        habitIsDaily.addEventListener('change', () => {
          if (habitIsDaily.checked) {
            habitDaysContainer.classList.add('hidden');
          } else {
            habitDaysContainer.classList.remove('hidden');
          }
        });
      },
      
      // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
      setupEventListeners() {
        // æ·»åŠ ä»»åŠ¡
        document.getElementById('add-task-btn').addEventListener('click', () => {
          const title = document.getElementById('task-title').value.trim();
          const points = document.getElementById('task-points').value;
          const type = document.getElementById('task-type').value;
          
          if (!title) {
            alert('è¯·è¾“å…¥ä»»åŠ¡åç§°ï¼');
            return;
          }
          
          let habitDays = 0;
          let isDaily = false;
          
          if (type === 'habit') {
            isDaily = document.getElementById('habit-is-daily').checked;
            if (!isDaily) {
              habitDays = document.getElementById('habit-days').value;
            }
          }
          
          AppData.addTask(title, points, type, habitDays, isDaily);
          this.renderTasks();
          
          // æ¸…ç©ºè¡¨å•
          document.getElementById('task-title').value = '';
          document.getElementById('task-points').value = '10';
          document.getElementById('task-type').value = 'normal';
          document.getElementById('habit-options-container').classList.add('hidden');
          document.getElementById('habit-is-daily').checked = false;
          document.getElementById('habit-days').value = '7';
        });
        
        // æ·»åŠ å¿ƒæ„¿
        document.getElementById('add-wish-btn').addEventListener('click', () => {
          const title = document.getElementById('wish-title').value.trim();
          const points = document.getElementById('wish-points').value;
          const description = document.getElementById('wish-description').value.trim();
          
          if (!title) {
            alert('è¯·è¾“å…¥å¿ƒæ„¿åç§°ï¼');
            return;
          }
          
          AppData.addWish(title, points, description);
          this.renderWishes();
          
          // æ¸…ç©ºè¡¨å•
          document.getElementById('wish-title').value = '';
          document.getElementById('wish-points').value = '50';
          document.getElementById('wish-description').value = '';
        });
        
        // ç®¡ç†æ¨¡å—æŒ‰é’®
        document.getElementById('manage-modules-btn').addEventListener('click', () => {
          this.openModuleManager();
        });
        
        // å…³é—­æ¨¡å—ç®¡ç†
        document.getElementById('close-module-manager').addEventListener('click', () => {
          this.closeModuleManager();
        });
        
        // æ·»åŠ æ–°æ¨¡å—
        document.getElementById('add-new-module').addEventListener('click', () => {
          const name = document.getElementById('new-module-name').value.trim();
          const points = document.getElementById('new-module-points').value;
          
          if (!name) {
            alert('è¯·è¾“å…¥æ¨¡å—åç§°ï¼');
            return;
          }
          
          AppData.addFocusModule(name, points);
          this.renderFocusModules();
          this.renderModuleList();
          
          // æ¸…ç©ºè¡¨å•
          document.getElementById('new-module-name').value = '';
          document.getElementById('new-module-points').value = '1';
        });
        
        // å…³é—­ç¼–è¾‘æ¨¡å—æ¨¡æ€æ¡†
        document.getElementById('cancel-edit-module').addEventListener('click', () => {
          this.closeEditModuleModal();
        });
        
        // ä¿å­˜ç¼–è¾‘æ¨¡å—
        document.getElementById('save-edit-module').addEventListener('click', () => {
          const moduleId = document.getElementById('edit-module-id').value;
          const newName = document.getElementById('edit-module-name').value.trim();
          const newPoints = document.getElementById('edit-module-points').value;
          
          if (!newName) {
            alert('è¯·è¾“å…¥æ¨¡å—åç§°ï¼');
            return;
          }
          
          AppData.editFocusModule(moduleId, newName, newPoints);
          this.renderFocusModules();
          this.renderModuleList();
          this.closeEditModuleModal();
        });
        
        // å–æ¶ˆè‡ªå®šä¹‰æ¨¡å—
        document.getElementById('cancel-custom-module').addEventListener('click', () => {
          this.closeCustomModuleModal();
        });
        
        // ä¿å­˜è‡ªå®šä¹‰æ¨¡å—
        document.getElementById('save-custom-module').addEventListener('click', () => {
          const name = document.getElementById('custom-module-name').value.trim();
          const points = document.getElementById('custom-module-points').value;
          
          if (!name) {
            alert('è¯·è¾“å…¥æ¨¡å—åç§°ï¼');
            return;
          }
          
          AppData.addFocusModule(name, points);
          this.renderFocusModules();
          this.closeCustomModuleModal();
        });
        
        // è¯´æ˜æŒ‰é’®
        document.getElementById('info-btn').addEventListener('click', () => {
          document.getElementById('info-modal').classList.remove('hidden');
        });
        
        // å…³é—­è¯´æ˜æ¨¡æ€æ¡†
        document.getElementById('close-info-modal').addEventListener('click', () => {
          document.getElementById('info-modal').classList.add('hidden');
        });
        
        // å…¨å±€é‡ç½®æŒ‰é’®
        document.getElementById('global-reset-btn').addEventListener('click', () => {
          document.getElementById('global-reset-modal').classList.remove('hidden');
        });
        
        // å–æ¶ˆå…¨å±€é‡ç½®
        document.getElementById('cancel-global-reset').addEventListener('click', () => {
          document.getElementById('global-reset-modal').classList.add('hidden');
        });
        
        // ç¡®è®¤å…¨å±€é‡ç½®
        document.getElementById('confirm-global-reset').addEventListener('click', () => {
          AppData.resetAll();
          this.renderFocusModules();
          this.renderTasks();
          this.renderWishes();
          this.updatePointsDisplay();
          PomodoroTimer.reset();
          document.getElementById('global-reset-modal').classList.add('hidden');
        });
      },
      
      // æ‰“å¼€æ¨¡å—ç®¡ç†
      openModuleManager() {
        this.renderModuleList();
        document.getElementById('module-manager-modal').classList.remove('hidden');
      },
      
      // å…³é—­æ¨¡å—ç®¡ç†
      closeModuleManager() {
        document.getElementById('module-manager-modal').classList.add('hidden');
      },
      
      // æ‰“å¼€ç¼–è¾‘æ¨¡å—æ¨¡æ€æ¡†
      openEditModuleModal(moduleId) {
        const module = AppData.focusModules.find(m => m.id === moduleId);
        if (module) {
          document.getElementById('edit-module-id').value = moduleId;
          document.getElementById('edit-module-name').value = module.name;
          document.getElementById('edit-module-points').value = module.pointsPerMinute;
          document.getElementById('edit-module-modal').classList.remove('hidden');
        }
      },
      
      // å…³é—­ç¼–è¾‘æ¨¡å—æ¨¡æ€æ¡†
      closeEditModuleModal() {
        document.getElementById('edit-module-modal').classList.add('hidden');
      },
      
      // æ‰“å¼€è‡ªå®šä¹‰æ¨¡å—æ¨¡æ€æ¡†
      openCustomModuleModal() {
        document.getElementById('custom-module-modal').classList.remove('hidden');
      },
      
      // å…³é—­è‡ªå®šä¹‰æ¨¡å—æ¨¡æ€æ¡†
      closeCustomModuleModal() {
        document.getElementById('custom-module-modal').classList.add('hidden');
      },
      
      // æ¸²æŸ“ä¸“æ³¨æ¨¡å— - 
      renderFocusModules() {
        const container = document.getElementById('focus-modules');
        container.innerHTML = '';
        
        AppData.focusModules.forEach(module => {
          const btn = document.createElement('button');
          btn.className = `px-4 py-2 rounded-lg text-sm transition-all-300 ${AppData.currentFocusModule === module.id ? 'bg-primary text-white' : 'bg-neutral-dark text-text hover:bg-secondary hover:text-white'}`;
          // ä»…ä¿ç•™æ¨¡å—åç§°ï¼Œåˆ é™¤ç§¯åˆ†ç›¸å…³çš„æ˜¾ç¤ºå†…å®¹
          btn.textContent = module.name;
          btn.addEventListener('click', () => {
            AppData.currentFocusModule = module.id;
            AppData.saveData();
            this.renderFocusModules();
          });
          container.appendChild(btn);
        });
        
        // æ·»åŠ è‡ªå®šä¹‰æ¨¡å—æŒ‰é’®
        const customBtn = document.createElement('button');
        customBtn.className = 'px-4 py-2 rounded-lg text-sm bg-accent text-white hover:bg-opacity-90 transition-all-300';
        customBtn.innerHTML = '<i class="fa fa-plus mr-1"></i>è‡ªå®šä¹‰';
        customBtn.addEventListener('click', () => {
          this.openCustomModuleModal();
        });
        container.appendChild(customBtn);
      },
      
      // æ¸²æŸ“æ¨¡å—åˆ—è¡¨ï¼ˆç®¡ç†ç”¨ï¼‰
      renderModuleList() {
        const container = document.getElementById('module-list');
        container.innerHTML = '';
        
        AppData.focusModules.forEach(module => {
          const item = document.createElement('div');
          item.className = 'flex justify-between items-center bg-neutral rounded-lg p-3';
          
          const info = document.createElement('div');
          info.innerHTML = `
            <div class="font-medium">${module.name}</div>
            <div class="text-xs text-text-light">${module.pointsPerMinute}ç§¯åˆ†/åˆ†é’Ÿ</div>
          `;
          
          const actions = document.createElement('div');
          actions.className = 'flex gap-2';
          
          const editBtn = document.createElement('button');
          editBtn.className = 'text-primary hover:text-primary/80';
          editBtn.innerHTML = '<i class="fa fa-pencil"></i>';
          editBtn.addEventListener('click', () => {
            this.openEditModuleModal(module.id);
          });
          
          const deleteBtn = document.createElement('button');
          deleteBtn.className = 'text-reset-red hover:text-red-600';
          deleteBtn.innerHTML = '<i class="fa fa-trash"></i>';
          deleteBtn.addEventListener('click', () => {
            if (confirm(`ç¡®å®šè¦åˆ é™¤"${module.name}"æ¨¡å—å—ï¼Ÿ`)) {
              AppData.deleteFocusModule(module.id);
              this.renderFocusModules();
              this.renderModuleList();
            }
          });
          
          actions.appendChild(editBtn);
          actions.appendChild(deleteBtn);
          item.appendChild(info);
          item.appendChild(actions);
          container.appendChild(item);
        });
      },
      
      // æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨
      renderTasks() {
        const container = document.getElementById('tasks-list');
        container.innerHTML = '';
        
        if (AppData.tasks.length === 0) {
          container.innerHTML = `
            <div class="text-center py-8 text-text-light">
              <i class="fa fa-list-ul text-4xl mb-3"></i>
              <p>æš‚æ— ä»»åŠ¡ï¼Œæ·»åŠ ä¸€ä¸ªæ–°ä»»åŠ¡å¼€å§‹å§ï¼</p>
            </div>
          `;
          return;
        }
        
        AppData.tasks.forEach(task => {
          const taskItem = document.createElement('div');
          taskItem.className = `task-item bg-neutral rounded-lg p-4 flex items-center justify-between ${task.completed ? 'opacity-70' : ''}`;
          
          const taskTypeLabel = task.type === 'habit' 
            ? (task.isDaily ? 'æ¯æ—¥ä¹ æƒ¯' : `ä¹ æƒ¯ä»»åŠ¡(${task.habitDays}å¤©)`) 
            : 'æ™®é€šä»»åŠ¡';
          const taskTypeClass = task.type === 'habit' ? 'bg-accent' : 'bg-secondary';
          
          taskItem.innerHTML = `
            <div class="flex items-center">
              <input type="checkbox" class="task-checkbox w-5 h-5 mr-3 rounded border-neutral-dark text-primary focus:ring-secondary" ${task.completed ? 'checked' : ''} data-id="${task.id}">
              <div>
                <h4 class="font-medium ${task.completed ? 'line-through text-text-light' : ''}">${task.title}</h4>
                <p class="text-sm text-text-light">å¥–åŠ±: ${task.points}ç§¯åˆ†</p>
              </div>
            </div>
            <div class="flex items-center">
              <span class="text-xs ${taskTypeClass} text-white px-2 py-1 rounded-full mr-2">${taskTypeLabel}</span>
              <button class="delete-task-btn text-text-light hover:text-red-500" data-id="${task.id}">
                <i class="fa fa-trash"></i>
              </button>
            </div>
          `;
          
          container.appendChild(taskItem);
          
          // æ·»åŠ å¤é€‰æ¡†äº‹ä»¶
          const checkbox = taskItem.querySelector('.task-checkbox');
          checkbox.addEventListener('change', (e) => {
            if (e.target.checked) {
              const pointsEarned = AppData.completeTask(task.id);
              this.updatePointsDisplay();
              this.showToast('task-complete-toast', `è·å¾— ${pointsEarned} ç§¯åˆ†`);
              this.renderTasks(); // é‡æ–°æ¸²æŸ“ä»¥æ›´æ–°æ ·å¼
            }
          });
          
          // æ·»åŠ åˆ é™¤æŒ‰é’®äº‹ä»¶
          const deleteBtn = taskItem.querySelector('.delete-task-btn');
          deleteBtn.addEventListener('click', () => {
            if (confirm(`ç¡®å®šè¦åˆ é™¤"${task.title}"ä»»åŠ¡å—ï¼Ÿ`)) {
              AppData.deleteTask(task.id);
              this.renderTasks();
            }
          });
        });
      },
      
      // æ¸²æŸ“å¿ƒæ„¿åˆ—è¡¨ -
      renderWishes() {
        const container = document.getElementById('wishes-list');
        container.innerHTML = '';
        
        if (AppData.wishes.length === 0) {
          container.innerHTML = `
            <div class="text-center py-8 text-text-light">
              <i class="fa fa-star text-4xl mb-3"></i>
              <p>æš‚æ— å¿ƒæ„¿ï¼Œæ·»åŠ ä¸€ä¸ªæ–°å¿ƒæ„¿å¼€å§‹å§ï¼</p>
            </div>
          `;
          return;
        }
        
        AppData.wishes.forEach(wish => {
          const wishItem = document.createElement('div');
          wishItem.className = `wish-item bg-neutral rounded-lg p-4 ${wish.redeemed ? 'opacity-70' : ''}`;
          
          wishItem.innerHTML = `
            <div class="flex justify-between items-start mb-2">
              <h4 class="font-medium ${wish.redeemed ? 'line-through text-text-light' : ''}">${wish.title}</h4>
              <div class="flex items-center gap-2">
                <span class="text-sm bg-accent text-white px-2 py-1 rounded-full">${wish.points}ç§¯åˆ†</span>
                <button class="delete-wish-btn text-text-light hover:text-red-500" data-id="${wish.id}">
                  <i class="fa fa-trash"></i>
                </button>
              </div>
            </div>
            <p class="text-sm text-text-light mb-3">${wish.description || 'æ— æè¿°'}</p>
            <button class="redeem-wish-btn bg-primary text-white px-4 py-1 rounded-lg text-sm shadow hover:bg-opacity-90 transition-all-300 ${wish.redeemed ? 'bg-text-light cursor-not-allowed' : ''}" data-id="${wish.id}">
              ${wish.redeemed ? 'å·²å…‘æ¢' : 'å…‘æ¢å¿ƒæ„¿'}
            </button>
          `;
          
          container.appendChild(wishItem);
          
          // æ·»åŠ å…‘æ¢æŒ‰é’®äº‹ä»¶
          const redeemBtn = wishItem.querySelector('.redeem-wish-btn');
          redeemBtn.addEventListener('click', () => {
            if (wish.redeemed) return;
            
            if (AppData.points < wish.points) {
              alert('ç§¯åˆ†ä¸è¶³ï¼Œæ— æ³•å…‘æ¢æ­¤å¿ƒæ„¿ï¼');
              return;
            }
            
            if (confirm(`ç¡®å®šè¦å…‘æ¢"${wish.title}"å¿ƒæ„¿å—ï¼Ÿéœ€è¦æ¶ˆè€—${wish.points}ç§¯åˆ†ã€‚`)) {
              const success = AppData.redeemWish(wish.id);
              if (success) {
                this.updatePointsDisplay();
                this.showToast('wish-redeem-toast', `æ¶ˆè€— ${wish.points} ç§¯åˆ†`);
                this.renderWishes();
              }
            }
          });

          // å¿ƒæ„¿åˆ é™¤æŒ‰é’®äº‹ä»¶
          const deleteWishBtn = wishItem.querySelector('.delete-wish-btn');
          deleteWishBtn.addEventListener('click', () => {
            if (confirm(`ç¡®å®šè¦åˆ é™¤"${wish.title}"å¿ƒæ„¿å—ï¼Ÿ`)) {
              AppData.deleteWish(wish.id);
              this.renderWishes();
            }
          });
        });
      },
      
      // æ›´æ–°ç§¯åˆ†æ˜¾ç¤º
      updatePointsDisplay() {
        document.getElementById('points-display').textContent = AppData.points;
      },
      
      // æ˜¾ç¤ºæç¤ºå¼¹çª—
      showToast(toastId, message) {
        const toast = document.getElementById(toastId);
        const messageElement = toast.querySelector('p:last-child');
        if (messageElement) {
          messageElement.textContent = message;
        }
        
        // æ˜¾ç¤ºå¼¹çª—
        toast.classList.remove('translate-y-20', 'opacity-0');
        toast.classList.add('translate-y-0', 'opacity-100');
        
        // 3ç§’åéšè—
        setTimeout(() => {
          toast.classList.remove('translate-y-0', 'opacity-100');
          toast.classList.add('translate-y-20', 'opacity-0');
        }, 3000);
      }
    };
    
    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
      AppData.init();
      PomodoroTimer.init();
      UI.init();
    });
  </script>
</body>
</html>



